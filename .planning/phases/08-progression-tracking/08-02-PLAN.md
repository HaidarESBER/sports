---
phase: 08-progression-tracking
plan: 02
type: execute
wave: 1
depends_on: [08-01]
files_modified: [src/app/progress/page.tsx, src/app/progress/ProgressDashboard.tsx, src/components/WorkoutChart.tsx, src/components/StatsCard.tsx, src/app/workouts/page.tsx, src/app/workouts/[id]/page.tsx, src/app/workouts/log/page.tsx]
autonomous: false
---

<objective>
Create progression tracking UI with workout history, statistics display, and progress visualizations.

Purpose: Enable users to view their workout history, track statistics, and visualize progress over time with charts.
Output: /progress dashboard with charts, /workouts list page, /workouts/[id] detail page, /workouts/log page for recording workouts
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/app/discover/page.tsx
@src/app/discover/DiscoverTabs.tsx
@src/components/SessionCard.tsx
@src/components/SearchFilters.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Recharts charting library</name>
  <files>package.json</files>
  <action>
Install Recharts for data visualization.

Run: npm install recharts

Why Recharts:
- React-native components (vs Canvas-based Chart.js)
- Good TypeScript support
- Responsive by default
- Simpler API than Visx
- Active maintenance and community
  </action>
  <verify>npm ls recharts shows installed version</verify>
  <done>Recharts installed and ready to use</done>
</task>

<task type="auto">
  <name>Task 2: Create StatsCard component</name>
  <files>src/components/StatsCard.tsx</files>
  <action>
Create reusable component for displaying statistics.

Props:
- title: string (e.g., "Total Workouts")
- value: string | number (e.g., "42" or "15h30")
- subtitle?: string (e.g., "this month")
- trend?: { value: number, isPositive: boolean } (e.g., +12% vs last month)
- icon?: React.ReactNode

Styling:
- Card with rounded corners and shadow
- Large value display
- Trend arrow (up green / down red)
- Consistent with existing card components
- Tailwind classes matching project style
  </action>
  <verify>Component renders correctly with various props</verify>
  <done>StatsCard component displays metrics with optional trend indicators</done>
</task>

<task type="auto">
  <name>Task 3: Create WorkoutChart component</name>
  <files>src/components/WorkoutChart.tsx</files>
  <action>
Create chart component using Recharts for progress visualization.

Props:
- type: 'line' | 'bar' | 'area'
- data: Array<{ date: string, value: number, label?: string }>
- title: string
- yAxisLabel?: string
- color?: string (default blue-500)

Features:
- Responsive container
- Tooltip on hover showing date and value
- X-axis with dates (formatted nicely)
- Y-axis with metric label
- Grid lines for readability
- Loading state while data fetches

Use "use client" directive for client-side rendering.
Import from 'recharts': LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, AreaChart, Area
  </action>
  <verify>Component renders chart with sample data</verify>
  <done>WorkoutChart renders line/bar/area charts with Recharts</done>
</task>

<task type="auto">
  <name>Task 4: Create progress dashboard page</name>
  <files>src/app/progress/page.tsx, src/app/progress/ProgressDashboard.tsx</files>
  <action>
Create /progress page as main progression tracking dashboard.

page.tsx (server component):
- Requires auth (redirect to /login if not authenticated)
- Render ProgressDashboard client component

ProgressDashboard.tsx (client component):
- Fetch stats from /api/workouts/stats on mount
- Period selector: Week | Month | Year | All (buttons)
- Top row: StatsCards grid (4 columns on desktop, 2 on mobile)
  - Total Workouts (with trend vs previous period)
  - Total Time (hours/minutes)
  - Average Duration
  - Current Streak
- Charts section:
  - Workouts per week (bar chart)
  - Duration over time (line chart)
  - Workouts by sport (could be pie/donut or horizontal bar)
- Recent PRs section (if any)
- Link to full workout history (/workouts)

Fetch workout data for charts: GET /api/workouts?period=month (need to add this)
Transform data for charts (group by date, calculate aggregates).
  </action>
  <verify>Page renders with stats and charts after API returns data</verify>
  <done>Progress dashboard displays statistics and charts</done>
</task>

<task type="auto">
  <name>Task 5: Create workouts list page</name>
  <files>src/app/workouts/page.tsx</files>
  <action>
Create /workouts page showing workout history list.

Features:
- Requires auth
- Header with "Historique des entrainements" title
- "Enregistrer un entrainement" button linking to /workouts/log
- Filters: sport dropdown, date range picker (simple from/to inputs)
- Workout list with pagination
- Each workout card shows:
  - Name and sport badge
  - Date (formatted: "Lundi 27 Jan 2026")
  - Duration if available
  - Rating stars if rated
  - Exercise count
  - Click to view details

Fetch from /api/workouts with filters.
Reuse pagination pattern from discover page.
  </action>
  <verify>Page displays workout list with filters and pagination</verify>
  <done>Workouts list page shows history with filtering</done>
</task>

<task type="auto">
  <name>Task 6: Create workout detail page</name>
  <files>src/app/workouts/[id]/page.tsx</files>
  <action>
Create /workouts/[id] page showing single workout details.

Features:
- Requires auth
- Fetch workout from /api/workouts/[id]
- Header with workout name, sport badge, date
- Metadata section: duration, rating, notes
- Link to template session if sessionId exists
- Exercise list showing:
  - Exercise name
  - Planned vs actual (if different)
  - Weight, reps, sets, duration, distance as applicable
  - Notes per exercise
- Action buttons:
  - Edit (link to edit page or modal)
  - Delete (with confirmation)
- Back link to /workouts
  </action>
  <verify>Page displays workout details with all exercises</verify>
  <done>Workout detail page shows complete workout information</done>
</task>

<task type="auto">
  <name>Task 7: Create workout logging page</name>
  <files>src/app/workouts/log/page.tsx</files>
  <action>
Create /workouts/log page for recording a new workout.

Features:
- Requires auth
- Two modes:
  1. Log from scratch (manual entry)
  2. Log from session template (select existing session)
- Session selector (optional): dropdown of user's sessions
  - When selected, auto-fill name, sport, and exercises with planned values
- Form fields:
  - Name (required, auto-filled if from session)
  - Sport (required, auto-filled if from session)
  - Date/time (default now, allow backdating)
  - Duration in minutes (optional)
  - Rating 1-5 stars (optional)
  - Notes (optional textarea)
- Exercises section:
  - If from session: show planned exercises, add actual values
  - If manual: add exercises from ExerciseSelector
  - Per exercise: weight, actualSets, actualReps, duration, distance, notes
- Submit button: POST to /api/workouts
- On success: redirect to /workouts/[id]

Form validation: name and sport required, at least basic info.
  </action>
  <verify>Can log workout manually and from session template</verify>
  <done>Workout logging page allows recording workouts both ways</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete progression tracking UI with dashboard, history, and workout logging</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Login and visit: http://localhost:3000/progress
    3. Verify stats cards display (may be empty if no workouts)
    4. Verify charts render (empty state ok)
    5. Click link to workouts history
    6. Visit: http://localhost:3000/workouts/log
    7. Log a manual workout with a few exercises
    8. Submit and verify redirect to detail page
    9. Go back to /progress, verify stats updated
    10. Try logging from a session template (if sessions exist)
    11. Check responsive layout on mobile width
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Recharts installed and working
- [ ] StatsCard component renders correctly
- [ ] WorkoutChart displays data with multiple chart types
- [ ] /progress page shows dashboard with stats and charts
- [ ] /workouts page lists history with filters
- [ ] /workouts/[id] shows workout details
- [ ] /workouts/log allows logging new workouts
- [ ] Session template pre-fill works
- [ ] npm run build succeeds
- [ ] User approved visual verification
</verification>

<success_criteria>
- All tasks completed
- Progression tracking UI fully functional
- Charts display workout data correctly
- User can log and view workout history
- User approved the implementation
</success_criteria>

<output>
After completion, create `.planning/phases/08-progression-tracking/08-02-SUMMARY.md`
</output>
